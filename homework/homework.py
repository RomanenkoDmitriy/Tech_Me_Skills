"""
Создать программу для расшифровки важного сообщения.

1. Есть пакет данных с чрезвычайно важной информацией. Нам нужно расшифровать эго в удобочитаемую форму.
2.Данные представлены ниже.
       data = "3636343332363633313336333933373333363233303332333133373335333733393336333433373330333233393336333433373335363233303332333336373330333233343333333933333336333333353336333233333337333333373333333133333336333333343336333733333332333333323333333033333337333333333333333733333333333333373333333433333336333333353333333733333330333333373333333233333336333333353333333633333339333333363333333233333336333333363336333733333333333333373333333533333336333333343333333733333333333333373333333633333332333333333336333733333332333333323333333033333336333333313333333733333333333333363333333633363337333333343333333733333338333333363333333633363336333333373333333733333330333333373333333133333332333333303333333633333335333633363333333933333337333333353333333733333334333333363333333433333332333333353336333633333336333333323333333033333336333333373333333733333333333633363333333533333332333333303333333633333335333633333333333333333336333333343333333333333339333333373333333033333333333333373333333633333339333333333333333533333336333333373333333333333337333333363333333333363333333333383333333733333336333333333333333333333336333333353333333333333330333333373333333133333333333333363333333633333336333333333333333233333337333333343333333333333337333333373333333533333333333333363333333633333338333333333333333333333336333333353333333333333338333333363333333833333333333333363333333733333330333333333333333433333337333333303333333333333336333333363333333633363336333333333333333733333331333333333333333333333336333333323336333333333330333333363333333533363333333333363333333633333338333333333333333633333337333333343333333333333336333333363333333233333333333333353333333633333339333333333333333233333337333333353333333333333330333333363333333133333333333333363333333633333336333333333333333933333337333333303333333333333337333333373333333833333333333333313333333633333333333333333333333633333336333333343333333333333335333333363333333233363333333333363333333633333331333333363333333233333337333333393333333333333337333333363333333933333333333333393333333733333330333333333333333633333336333333343333333333333334333333373333333133333333333333363333333633333333333333363333333433333336333333363336333333333336333333363333333533333333333333373333333633333335333633333333333633333336333333343336333633333336333333363333333533363333333333363333333633333335333333363333333633333336333333313336333333333336333333373333333233333336333333363333333733333333333333333333333633333337333333333333333333333333333333373333333133333333333333363333333733333335333333333333333233333337333333373333333333333337333333363333333933333333333333323333333633333335333633333333333233333336333333363333333333333330333333363333333533333333333333363333333733333333333333363333333333333337333333343333333333333336333333373333333533333333333333323333333633333339333333333333333733333336333333363336333333333334333333373333333333333333333333363333333633333339333333333333333433333336333333373333333333333336333333363333333133333336333333313333333633333334333633333333333633333337333333323333333333333335333333363333333333363333333333363333333733333336333333333333333433333336333333343333333333333336333333363333333133333333333333353333333733333331333333333333333733333336333333393333333333333332333333373333333133333333333333373333333733333331333333333333333833333337333333393333333333333337333333373333333533333333333333393333333733333332333333333333333633333336333333343333333333333333333333373333333833333333333333373333333733333331333333333333333733333337333333363333333333333337333333373333333933333333333333333333333633333336333633333333333633333336333333383333333333333335333333363333333133363333333333363333333633333331333633363333333433333337333333383333333333333337333333363333333633333333333333383333333633333333333333333333333733333337333333343333333333333333333333363333333433363333333333373333333733333333333333333333333233333336333333353333333333333336333333363333333333333336333333313333333633333334333633303263373032653235363336653631363437333739363337353632373032323735363236393733363032353638363437303266363437653639363032373665363936343734373536373630323636663630323536333665363136383633363032393732373536363735363032353636373136383630323537663639373032633235363336653635363437333739363337323735363037303234366536313630326336313635366137303236366636303234366536393662363032343731363836343730323836343739363735207c20216f6c697568206e697475702021656e6961726b55206f742079726f6c472021737572616c6542206576694c20676e6f4c20216e6977206c6c6977206577202c7469206f64206e6163206577202c7075207469207065656b202c74616572672064696420756f59"
3.Это представлено в шестнадцатеричной системе счисления. Где каждые 2 символа — это 1 байт информации.
4.Каждый байт данных содержит число, которое необходимо сопоставить с таблицей Юникода.
5.Понятно, что порядок байтов передан в обратном порядке.
"""

data = "3636343332363633313336333933373333363233303332333133373335333733393336333433373330333233393336333433373335363233303332333336373330333233343333333933333336333333353336333233333337333333373333333133333336333333343336333733333332333333323333333033333337333333333333333733333333333333373333333433333336333333353333333733333330333333373333333233333336333333353333333633333339333333363333333233333336333333363336333733333333333333373333333533333336333333343333333733333333333333373333333633333332333333333336333733333332333333323333333033333336333333313333333733333333333333363333333633363337333333343333333733333338333333363333333633363336333333373333333733333330333333373333333133333332333333303333333633333335333633363333333933333337333333353333333733333334333333363333333433333332333333353336333633333336333333323333333033333336333333373333333733333333333633363333333533333332333333303333333633333335333633333333333333333336333333343333333333333339333333373333333033333333333333373333333633333339333333333333333533333336333333373333333333333337333333363333333333363333333333383333333733333336333333333333333333333336333333353333333333333330333333373333333133333333333333363333333633333336333333333333333233333337333333343333333333333337333333373333333533333333333333363333333633333338333333333333333333333336333333353333333333333338333333363333333833333333333333363333333733333330333333333333333433333337333333303333333333333336333333363333333633363336333333333333333733333331333333333333333333333336333333323336333333333330333333363333333533363333333333363333333633333338333333333333333633333337333333343333333333333336333333363333333233333333333333353333333633333339333333333333333233333337333333353333333333333330333333363333333133333333333333363333333633333336333333333333333933333337333333303333333333333337333333373333333833333333333333313333333633333333333333333333333633333336333333343333333333333335333333363333333233363333333333363333333633333331333333363333333233333337333333393333333333333337333333363333333933333333333333393333333733333330333333333333333633333336333333343333333333333334333333373333333133333333333333363333333633333333333333363333333433333336333333363336333333333336333333363333333533333333333333373333333633333335333633333333333633333336333333343336333633333336333333363333333533363333333333363333333633333335333333363333333633333336333333313336333333333336333333373333333233333336333333363333333733333333333333333333333633333337333333333333333333333333333333373333333133333333333333363333333733333335333333333333333233333337333333373333333333333337333333363333333933333333333333323333333633333335333633333333333233333336333333363333333333333330333333363333333533333333333333363333333733333333333333363333333333333337333333343333333333333336333333373333333533333333333333323333333633333339333333333333333733333336333333363336333333333334333333373333333333333333333333363333333633333339333333333333333433333336333333373333333333333336333333363333333133333336333333313333333633333334333633333333333633333337333333323333333333333335333333363333333333363333333333363333333733333336333333333333333433333336333333343333333333333336333333363333333133333333333333353333333733333331333333333333333733333336333333393333333333333332333333373333333133333333333333373333333733333331333333333333333833333337333333393333333333333337333333373333333533333333333333393333333733333332333333333333333633333336333333343333333333333333333333373333333833333333333333373333333733333331333333333333333733333337333333363333333333333337333333373333333933333333333333333333333633333336333633333333333633333336333333383333333333333335333333363333333133363333333333363333333633333331333633363333333433333337333333383333333333333337333333363333333633333333333333383333333633333333333333333333333733333337333333343333333333333333333333363333333433363333333333373333333733333333333333333333333233333336333333353333333333333336333333363333333333333336333333313333333633333334333633303263373032653235363336653631363437333739363337353632373032323735363236393733363032353638363437303266363437653639363032373665363936343734373536373630323636663630323536333665363136383633363032393732373536363735363032353636373136383630323537663639373032633235363336653635363437333739363337323735363037303234366536313630326336313635366137303236366636303234366536393662363032343731363836343730323836343739363735207c20216f6c697568206e697475702021656e6961726b55206f742079726f6c472021737572616c6542206576694c20676e6f4c20216e6977206c6c6977206577202c7469206f64206e6163206577202c7075207469207065656b202c74616572672064696420756f59"

string_l = []

for i in range(0, len(data) - 1, 2):
    string_l.append(chr(int(data[i: i + 2], 16)))

rev_str = "".join(reversed(string_l))
print(rev_str)

"""
Интегрируйте алгоритм сокрытия логина и пароля в существующий код.

Важное примечание: ниже приведен готовый код. 
Ваша задача — модифицировать его так, чтобы он отвечал следующим требованиям.

1.Должна быть реализована: вход в систему
2.При использовании входа в систему – сеанс занят пользователем, учетные данные которого использовались для входа.
3.Пользователь не может войти под другими данными, если у него активна старая сессия.
4.Данные пользователя хранятся в базе данных.
5.В базе данных должна храниться только хешированная информация.
"""

# frontend --------------------------
info = """
USER:\t\t{}
LAST CMD:\t{}
"""

# database --------------------------
database = {}

# session ---------------------------
current_user = 'anonimus'

# backend ---------------------------
working = True
cmd = "null"

while working:
    print(info.format(current_user, cmd))
    cmd = input(">> ")
    if cmd == "singin":
        login = input("login: ")
        password_1 = input("password: ")
        password_2 = input("repeat password: ")
        if password_1 == password_2:
            database[login.encode()] = password_1.encode()
            print("Registration successful")
        else:
            print("Password mismatch!")

    elif cmd == "login":
        login = input("login: ")
        password = input("password: ")
        if login.encode() in database:
            if password == database[login.encode()].decode():
                current_user = login
            else:
                print("Incorrect password")
        else:
            print("Incorrect login")
    elif cmd == "log out":
        if current_user != "anonimus":
            del database[current_user.encode()]
            current_user = 'anonimus'
        else:
            print("Login to your account")
    else:
        working = False
else:
    print("WORK COMPLETED")


"""
Создайте мини-игру, чтобы решить логическую головоломку.

Важное примечание: есть загадка, как говорится, «от Стива Джобса». 
Есть два ведра одно на 3 литра, другое на 5 литров и неограниченное количество воды. Пользователь может:
        Налить воду в любое ведро.
        Налить воду из любого ведра.
        Переллить воду из одного ведра в другое.
    

Критерии приемки:
        Пользователь вводит одну из семи команд:
            fill_5l
            fill_3l
            pour_5l
            pour_3l
            pour_from_5_to_3
            pour_from_3_to_5
            exit
        Программа работает до тех пор, пока пользователь не наберет 4 литра или не выйдет.
        В ведрах не может быть отрицательного количества воды.
        В ведрах не может быть больше литров, чем рассчитано на ведро (3 л и 5 л).
        Программа должна иметь счетчик ходов и возвращать пользователю количество ходов, 
                                                                            за которое он решил заданную задачу.
        Ниже приведен неполный код прототипа, доработайте его.
"""

# frontend ------------------------------------------
bucket_3l_list = [" ", " ", " "]
bucket_5l_list = [" ", " ", " ", " ", " "]
clear = "\b" * 10000
front = """

    3l             5l
              _____________
              \{7}{7}{7}{7}{7}{7}{7}{7}{7}{7}{7}/
_________      \{6}{6}{6}{6}{6}{6}{6}{6}{6}/
\{2}{2}{2}{2}{2}{2}{2}/       \{5}{5}{5}{5}{5}{5}{5}/
 \{1}{1}{1}{1}{1}/         \{4}{4}{4}{4}{4}/
  \{0}{0}{0}/           \{3}{3}{3}/
   ¯¯¯             ¯¯¯
"""

# database ------------------------------------------
database = {
    'bucket_3l': 0,
    'bucket_5l': 0,
}

# backend -------------------------------------------
working = True
counter = 0

while working:
    print(database)

    # --------------------------------------------------------------
    bucket_3l_list = (["@"] * database['bucket_3l'] + [" "] * 3)[:3]
    bucket_5l_list = (["@"] * database['bucket_5l'] + [" "] * 5)[:5]
    print(front.format(*(bucket_3l_list[:4] + bucket_5l_list)))
    if database["bucket_5l"] == 4:
        print("Congratulations!", f"Number of steps: {counter}")
    cmd = input(">> ")
    # --------------------------------------------------------------
    if cmd == "exit":
        working = False
    else:
        if cmd == "fill_3l":
            database['bucket_3l'] = 3
            counter += 1

        elif cmd == "pour_3l":
            database['bucket_3l'] = 0
            counter += 1

        elif cmd == "fill_5l":
            database["bucket_5l"] = 5
            counter += 1

        elif cmd == "pour_5l":
            database["bucket_5l"] = 0
            counter += 1

        elif cmd == "pour_from_5_to_3":
            counter += 1
            if database["bucket_3l"] != 3:
                if database["bucket_5l"] != 0:
                    if database["bucket_3l"] == 0:
                        if database["bucket_5l"] >= 3:
                            database["bucket_3l"] = 3
                            database["bucket_5l"] = database["bucket_5l"] - 3
                            continue
                        else:
                            database["bucket_3l"] = database["bucket_5l"]
                            database["bucket_5l"] = 0
                            continue
                    else:
                        if database["bucket_5l"] + database["bucket_3l"] <= 3:
                            database["bucket_3l"] = database["bucket_5l"] + database["bucket_3l"]
                            database["bucket_5l"] = 0
                            continue
                        else:
                            database["bucket_5l"] = database["bucket_5l"] - (3 - database["bucket_3l"])
                            database["bucket_3l"] = 3
                            continue

                else:
                    print("5 liter bucket empty")
            else:
                print("3 liter bucket full")

        elif cmd == "pour_from_3_to_5":
            counter += 1
            if database["bucket_5l"] != 5:
                if database["bucket_3l"] != 0:
                    if database["bucket_5l"] == 0:
                        database["bucket_5l"] = database["bucket_3l"]
                        database["bucket_3l"] = 0
                        continue
                    else:
                        if database["bucket_5l"] + database["bucket_3l"] <= 5:
                            database["bucket_5l"] = database["bucket_3l"] + database["bucket_5l"]
                            database["bucket_3l"] = 0
                            continue
                        else:
                            database["bucket_3l"] = database["bucket_3l"] - (5 - database["bucket_5l"])
                            database["bucket_5l"] = 5
                            continue
                else:
                    print("3 liter bucket empty")
            else:
                print("5 liter bucket full")

    print(clear)
